<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026æ˜¥ äº¬éƒ½ãƒ»å¤§é˜ª å®¶æ—æ—…è¡Œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: #f8fafc;
            color: #334155;
            padding-bottom: 80px; /* Bottom Navã®åˆ†ã ã‘ç©ºã‘ã‚‹ */
        }
        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼éè¡¨ç¤º */
        .hide-scroll::-webkit-scrollbar {
            display: none;
        }
        .hide-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .fade-enter {
            animation: fadeEnter 0.3s ease-out forwards;
        }
        @keyframes fadeEnter {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .active-tab {
            color: #ec4899; /* pink-500 */
        }
        .nav-item.active .icon-box {
            background-color: #fdf2f8; /* pink-50 */
            color: #db2777; /* pink-600 */
        }
        /* å¤©æ°—ãƒãƒƒã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .weather-badge {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; /* æ•°å­—ã‚’è¦‹ã‚„ã™ã */
        }
        /* æ··é›‘ãƒãƒƒã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .crowd-badge {
            display: inline-flex;
            align-items: center;
            gap: 2px;
            font-size: 10px;
            padding: 2px 7px;
            border-radius: 9999px;
            font-weight: 700;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            white-space: nowrap;
        }
        .crowd-high   { background: #fef2f2; color: #dc2626; border: 1px solid #fecaca; }
        .crowd-medium { background: #fefce8; color: #ca8a04; border: 1px solid #fde68a; }
        .crowd-low    { background: #f0fdf4; color: #16a34a; border: 1px solid #bbf7d0; }
        /* ã‚¹ãƒ¯ã‚¤ãƒ—ãƒ’ãƒ³ãƒˆ */
        .swipe-hint {
            animation: swipeHint 2s ease-in-out 1s 1;
            opacity: 0;
        }
        @keyframes swipeHint {
            0% { opacity: 0; transform: translateX(0); }
            20% { opacity: 1; }
            50% { opacity: 1; transform: translateX(-15px); }
            80% { opacity: 1; transform: translateX(0); }
            100% { opacity: 0; }
        }
    </style>
</head>
<body class="min-h-screen">

    <header class="bg-white/90 backdrop-blur-md sticky top-0 z-40 border-b border-pink-100 shadow-sm">
        <div class="max-w-md mx-auto px-4 py-3 flex justify-between items-center">
            <div>
                <h1 class="text-lg font-bold text-gray-800">ğŸŒ¸ 2026æ˜¥ å®¶æ—æ—…è¡Œ</h1>
                <p class="text-[10px] text-pink-500 font-bold tracking-widest">OSAKA & KYOTO / 3.26-30</p>
            </div>
            <div id="weather-icon" class="text-gray-400 text-sm">
                <i class="fa-solid fa-plane-departure text-pink-300"></i>
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto px-4 py-4 relative">
        
        <div id="view-home" class="view-section fade-enter">
            <div class="bg-gradient-to-br from-pink-500 to-orange-400 rounded-2xl p-6 text-white shadow-lg mb-6 relative overflow-hidden">
                <div class="relative z-10">
                    <p class="text-xs font-bold opacity-80 mb-1">TRIP THEME</p>
                    <h2 class="text-2xl font-bold leading-tight mb-2">USJå…¨åŠ›éŠã³ &<br>äº¬éƒ½ã®æ­´å²æº€å–«</h2>
                    <div class="mt-4 flex gap-2 flex-wrap">
                        <span class="bg-white/20 px-3 py-1 rounded-full text-xs font-bold backdrop-blur-sm">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶æ—4äºº</span>
                        <span class="bg-white/20 px-3 py-1 rounded-full text-xs font-bold backdrop-blur-sm">ğŸš„ 4æ³Š5æ—¥</span>
                    </div>
                    <div id="countdown-display" class="mt-3"></div>
                </div>
                <i class="fa-solid fa-torii-gate absolute -bottom-4 -right-4 text-9xl text-white opacity-10 rotate-12"></i>
            </div>

            <div class="mb-6">
                <h3 class="text-sm font-bold text-gray-400 mb-2 px-1">å…¨ä½“ãƒãƒƒãƒ—</h3>
                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-2">
                    <img src="./summary.png" alt="Map" class="w-full rounded-lg" onerror="this.src='https://placehold.co/600x400/pink/white?text=Map+Image'">
                </div>
            </div>

            <h3 class="text-sm font-bold text-gray-400 mb-2 px-1">äºˆç´„ãƒ»ç§»å‹•</h3>
            <div class="grid grid-cols-2 gap-3 mb-6">
                <a href="https://www.usj.co.jp/web/ja/jp" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-3 active:scale-95 transition">
                    <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-500"><i class="fa-solid fa-ticket"></i></div>
                    <div class="text-xs font-bold">USJå…¬å¼<br><span class="text-[10px] text-gray-400 font-normal">å¾…ã¡æ™‚é–“</span></div>
                </a>
                <a href="https://go.goinc.jp/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-3 active:scale-95 transition">
                    <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-500"><i class="fa-solid fa-taxi"></i></div>
                    <div class="text-xs font-bold">GOã‚¢ãƒ—ãƒª<br><span class="text-[10px] text-gray-400 font-normal">ã‚¿ã‚¯ã‚·ãƒ¼å‘¼å‡º</span></div>
                </a>
                 <a href="https://www.mmjp.or.jp/Capt-Line/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-3 active:scale-95 transition">
                    <div class="w-8 h-8 rounded-full bg-cyan-100 flex items-center justify-center text-cyan-500"><i class="fa-solid fa-ship"></i></div>
                    <div class="text-xs font-bold">ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ãƒ©ã‚¤ãƒ³<br><span class="text-[10px] text-gray-400 font-normal">æ™‚åˆ»è¡¨</span></div>
                </a>
                 <a href="https://crosta.jp/osaka/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-3 active:scale-95 transition">
                    <div class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-orange-500"><i class="fa-solid fa-suitcase-rolling"></i></div>
                    <div class="text-xs font-bold">Crostaå¤§é˜ª<br><span class="text-[10px] text-gray-400 font-normal">è·ç‰©é…é€</span></div>
                </a>
            </div>

            <h3 class="text-sm font-bold text-gray-400 mb-2 px-1">è¨ªå•ã‚¹ãƒãƒƒãƒˆå…¬å¼</h3>
            <div class="grid grid-cols-2 gap-3 mb-20">
                <a href="https://www.osakacastle.net/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-brands fa-fort-awesome text-orange-400 w-5 text-center"></i>
                    <span class="text-xs font-bold">å¤§é˜ªåŸ</span>
                </a>
                <a href="https://www.sakai-tcb.or.jp/spot/detail/126" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-mountain text-green-600 w-5 text-center"></i>
                    <span class="text-xs font-bold">å¤§ä»™å¤å¢³</span>
                </a>
                <a href="https://www.kaiyukan.com/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-fish-fins text-blue-400 w-5 text-center"></i>
                    <span class="text-xs font-bold">æµ·éŠé¤¨</span>
                </a>
                <a href="https://www.byodoin.or.jp/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-building-columns text-red-400 w-5 text-center"></i>
                    <span class="text-xs font-bold">å¹³ç­‰é™¢</span>
                </a>
                <a href="http://inari.jp/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-torii-gate text-red-600 w-5 text-center"></i>
                    <span class="text-xs font-bold">ä¼è¦‹ç¨²è·</span>
                </a>
                <a href="https://www.kiyomizudera.or.jp/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-gopuram text-purple-400 w-5 text-center"></i>
                    <span class="text-xs font-bold">æ¸…æ°´å¯º</span>
                </a>
                 <a href="https://kyoto-gosho.kunaicho.go.jp/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-crown text-yellow-500 w-5 text-center"></i>
                    <span class="text-xs font-bold">äº¬éƒ½å¾¡æ‰€</span>
                </a>
                <a href="https://www.toei-eigamura.com/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-mask text-gray-600 w-5 text-center"></i>
                    <span class="text-xs font-bold">æ˜ ç”»æ‘</span>
                </a>
                <a href="http://www.ryoanji.com/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-seedling text-green-700 w-5 text-center"></i>
                    <span class="text-xs font-bold">é¾å®‰å¯º</span>
                </a>
                <a href="https://www.shokoku-ji.jp/kinkakuji/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-place-of-worship text-yellow-400 w-5 text-center"></i>
                    <span class="text-xs font-bold">é‡‘é–£å¯º</span>
                </a>
                 <a href="https://www.arayama-hoshokai.com/" target="_blank" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-2 active:scale-95 transition">
                    <i class="fa-solid fa-tree text-green-500 w-5 text-center"></i>
                    <span class="text-xs font-bold">åµå±±</span>
                </a>
            </div>
        </div>

        <div id="view-schedule" class="view-section hidden fade-enter">
            <div class="flex overflow-x-auto hide-scroll gap-2 mb-6 pb-2 sticky top-0 bg-[#f8fafc] pt-2 z-30">
                <button onclick="renderDay(0)" id="tab-0" class="day-tab flex-shrink-0 px-4 py-2 rounded-full bg-white border border-gray-200 text-xs font-bold text-gray-500 shadow-sm transition-all whitespace-nowrap">3/26 å¤§é˜ª</button>
                <button onclick="renderDay(1)" id="tab-1" class="day-tab flex-shrink-0 px-4 py-2 rounded-full bg-white border border-gray-200 text-xs font-bold text-gray-500 shadow-sm transition-all whitespace-nowrap">3/27 USJ</button>
                <button onclick="renderDay(2)" id="tab-2" class="day-tab flex-shrink-0 px-4 py-2 rounded-full bg-white border border-gray-200 text-xs font-bold text-gray-500 shadow-sm transition-all whitespace-nowrap">3/28 å®‡æ²»</button>
                <button onclick="renderDay(3)" id="tab-3" class="day-tab flex-shrink-0 px-4 py-2 rounded-full bg-white border border-gray-200 text-xs font-bold text-gray-500 shadow-sm transition-all whitespace-nowrap">3/29 å¾¡æ‰€</button>
                <button onclick="renderDay(4)" id="tab-4" class="day-tab flex-shrink-0 px-4 py-2 rounded-full bg-white border border-gray-200 text-xs font-bold text-gray-500 shadow-sm transition-all whitespace-nowrap">3/30 åµå±±</button>
            </div>

            <div id="day-content" class="pb-20">
                </div>
            <div id="day-nav-buttons" class="flex justify-between items-center px-2 pb-6 -mt-14">
                <button id="prev-day-btn" onclick="if(currentDayIndex>0) renderDay(currentDayIndex-1)" class="bg-white shadow-md border border-gray-200 text-gray-500 w-10 h-10 rounded-full flex items-center justify-center text-sm active:scale-90 transition hover:bg-pink-50 hover:text-pink-500 disabled:opacity-30">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <span class="swipe-hint text-[10px] text-gray-300"><i class="fa-solid fa-hand-point-up mr-1"></i>ã‚¹ãƒ¯ã‚¤ãƒ—ã§æ—¥ç¨‹åˆ‡æ›¿</span>
                <button id="next-day-btn" onclick="if(currentDayIndex<4) renderDay(currentDayIndex+1)" class="bg-white shadow-md border border-gray-200 text-gray-500 w-10 h-10 rounded-full flex items-center justify-center text-sm active:scale-90 transition hover:bg-pink-50 hover:text-pink-500 disabled:opacity-30">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <div id="view-info" class="view-section hidden fade-enter">
            <h3 class="text-sm font-bold text-gray-400 mb-3 uppercase tracking-widest">Accommodation</h3>
            
            <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 mb-4">
                <div class="flex justify-between items-start mb-2">
                    <span class="bg-blue-100 text-blue-600 text-[10px] font-bold px-2 py-1 rounded">1-2æ³Šç›® (å¤§é˜ª)</span>
                </div>
                <h4 class="font-bold text-lg text-gray-800 mb-1">ãƒ›ãƒ†ãƒ«äº¬é˜ª<br>ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒ»ã‚¿ãƒ¯ãƒ¼</h4>
                <p class="text-xs text-gray-500 mb-4"><i class="fa-solid fa-location-dot mr-1"></i>ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ã‚·ãƒ†ã‚£é§… ç›´çµ</p>
                <div class="flex gap-2">
                    <a href="https://goo.gl/maps/example" target="_blank" class="flex-1 bg-gray-50 py-2 rounded-lg text-center text-xs font-bold text-gray-600 hover:bg-gray-100 border border-gray-200">ğŸ“ ãƒãƒƒãƒ—</a>
                    <a href="https://www.hotelkeihan.co.jp/tower/" target="_blank" class="flex-1 bg-blue-50 py-2 rounded-lg text-center text-xs font-bold text-blue-600 hover:bg-blue-100 border border-blue-200">å…¬å¼ã‚µã‚¤ãƒˆ</a>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 mb-8">
                <div class="flex justify-between items-start mb-2">
                    <span class="bg-green-100 text-green-600 text-[10px] font-bold px-2 py-1 rounded">3-4æ³Šç›® (äº¬éƒ½)</span>
                    <span class="bg-orange-100 text-orange-600 text-[10px] font-bold px-2 py-1 rounded ml-2">æœé£Ÿä»˜</span>
                </div>
                <h4 class="font-bold text-lg text-gray-800 mb-1">ã‚¢ãƒ‘ãƒ›ãƒ†ãƒ«ã€ˆäº¬éƒ½é§…åŒ—ã€‰</h4>
                <p class="text-xs text-gray-500 mb-1"><i class="fa-solid fa-location-dot mr-1"></i>äº¬éƒ½é§… å¾’æ­©3-5åˆ†</p>
                <p class="text-xs text-gray-400 mb-4">ã‚³ãƒã‚¯ãƒ†ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ ãƒ—ãƒ©ãƒ³</p>
                <div class="flex gap-2">
                    <a href="https://goo.gl/maps/qA6a9d7H3mZ2" target="_blank" class="flex-1 bg-gray-50 py-2 rounded-lg text-center text-xs font-bold text-gray-600 hover:bg-gray-100 border border-gray-200">ğŸ“ ãƒãƒƒãƒ—</a>
                    <a href="https://www.apahotel.com/hotel/kansai/kyoto/kyoto-ekikita/" target="_blank" class="flex-1 bg-green-50 py-2 rounded-lg text-center text-xs font-bold text-green-600 hover:bg-green-100 border border-green-200">å…¬å¼ã‚µã‚¤ãƒˆ</a>
                </div>
            </div>

            <h3 class="text-sm font-bold text-gray-400 mb-3 uppercase tracking-widest">Check List</h3>
            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-8">
                <label class="flex items-center p-4 border-b border-gray-50 cursor-pointer hover:bg-pink-50 transition">
                    <input type="checkbox" class="w-5 h-5 accent-pink-500 rounded border-gray-300">
                    <span class="ml-3 text-sm font-bold text-gray-700">USJ ã‚¨ã‚¯ã‚¹ãƒ—ãƒ¬ã‚¹ãƒ»ãƒ‘ã‚¹ (å°åˆ·/ã‚¹ã‚¯ã‚·ãƒ§)</span>
                </label>
                <label class="flex items-center p-4 border-b border-gray-50 cursor-pointer hover:bg-pink-50 transition">
                    <input type="checkbox" class="w-5 h-5 accent-pink-500 rounded border-gray-300">
                    <span class="ml-3 text-sm font-bold text-gray-700">æµ·éŠé¤¨ãƒ»æ˜ ç”»æ‘ WEBãƒã‚±ãƒƒãƒˆ</span>
                </label>
                <label class="flex items-center p-4 border-b border-gray-50 cursor-pointer hover:bg-pink-50 transition">
                    <input type="checkbox" class="w-5 h-5 accent-pink-500 rounded border-gray-300">
                    <span class="ml-3 text-sm font-bold text-gray-700">æ­©ãã‚„ã™ã„é´ & ä¸Šç€</span>
                </label>
                <label class="flex items-center p-4 cursor-pointer hover:bg-pink-50 transition">
                    <input type="checkbox" class="w-5 h-5 accent-pink-500 rounded border-gray-300">
                    <span class="ml-3 text-sm font-bold text-gray-700">ã‚¹ãƒãƒ›å……é›»å™¨ & ãƒ¢ãƒã‚¤ãƒ«ãƒãƒƒãƒ†ãƒªãƒ¼</span>
                </label>
            </div>

            <h3 class="text-sm font-bold text-gray-400 mb-3 uppercase tracking-widest">Useful Info</h3>

            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-4">
                <div class="p-4 border-b border-gray-50">
                    <div class="flex items-center gap-2 mb-2">
                        <div class="w-7 h-7 rounded-full bg-red-100 flex items-center justify-center text-red-500 text-xs"><i class="fa-solid fa-phone"></i></div>
                        <span class="text-sm font-bold text-gray-800">ç·Šæ€¥é€£çµ¡å…ˆ</span>
                    </div>
                    <div class="space-y-1.5 text-xs text-gray-600 ml-9">
                        <p><span class="font-bold">è­¦å¯Ÿ:</span> <a href="tel:110" class="text-blue-500 underline">110</a></p>
                        <p><span class="font-bold">æ•‘æ€¥ãƒ»æ¶ˆé˜²:</span> <a href="tel:119" class="text-blue-500 underline">119</a></p>
                        <p><span class="font-bold">ç½å®³ä¼è¨€ãƒ€ã‚¤ãƒ¤ãƒ«:</span> <a href="tel:171" class="text-blue-500 underline">171</a></p>
                    </div>
                </div>
                <div class="p-4 border-b border-gray-50">
                    <div class="flex items-center gap-2 mb-2">
                        <div class="w-7 h-7 rounded-full bg-blue-100 flex items-center justify-center text-blue-500 text-xs"><i class="fa-solid fa-train"></i></div>
                        <span class="text-sm font-bold text-gray-800">äº¤é€šICã‚«ãƒ¼ãƒ‰</span>
                    </div>
                    <p class="text-xs text-gray-600 ml-9">ICOCA / Suica / PASMO åˆ©ç”¨å¯ã€‚<br>ãƒã‚¹ãƒ»åœ°ä¸‹é‰„ãƒ»JRå…¨ã¦ã‚¿ãƒƒãƒæ±ºæ¸ˆOKã€‚<br>ãƒãƒ£ãƒ¼ã‚¸ã¯å„é§…ã®åˆ¸å£²æ©Ÿã§ã€‚</p>
                </div>
                <div class="p-4">
                    <div class="flex items-center gap-2 mb-2">
                        <div class="w-7 h-7 rounded-full bg-purple-100 flex items-center justify-center text-purple-500 text-xs"><i class="fa-solid fa-kit-medical"></i></div>
                        <span class="text-sm font-bold text-gray-800">ä½“èª¿ç®¡ç†ãƒ¡ãƒ¢</span>
                    </div>
                    <p class="text-xs text-gray-600 ml-9">3æœˆä¸‹æ—¬ã®å¤§é˜ªãƒ»äº¬éƒ½ã¯æ—¥ä¸­15-18â„ƒã€<br>æœæ™©ã¯10â„ƒå‰å¾Œã€‚è–„æ‰‹ã®ä¸Šç€å¿…é ˆã€‚<br>èŠ±ç²‰ã‚·ãƒ¼ã‚ºãƒ³ â€” ãƒã‚¹ã‚¯ãƒ»ç›®è–¬ã‚’æ¨å¥¨ã€‚</p>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-20">
                <div class="p-4 border-b border-gray-50">
                    <div class="flex items-center gap-2 mb-3">
                        <div class="w-7 h-7 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600 text-xs"><i class="fa-solid fa-lightbulb"></i></div>
                        <span class="text-sm font-bold text-gray-800">æ—…ã®ã‚³ãƒ„</span>
                    </div>
                    <div class="space-y-2 text-xs text-gray-600 ml-9">
                        <p><i class="fa-solid fa-shoe-prints text-pink-400 mr-1"></i> 1æ—¥1ä¸‡æ­©ä»¥ä¸Šæ­©ãã®ã§é´é¸ã³ãŒé‡è¦</p>
                        <p><i class="fa-solid fa-clock text-pink-400 mr-1"></i> äººæ°—ã‚¹ãƒãƒƒãƒˆã¯æœã‚¤ãƒã‹å¤•æ–¹ä»¥é™ãŒç©´å ´</p>
                        <p><i class="fa-solid fa-coins text-pink-400 mr-1"></i> å¯ºç¤¾ä»é–£ã¯ç¾é‡‘ã®ã¿ã®å ´æ‰€ãŒå¤šã„</p>
                        <p><i class="fa-solid fa-bottle-water text-pink-400 mr-1"></i> ã“ã¾ã‚ãªæ°´åˆ†è£œçµ¦ã¨ä¼‘æ†©ã‚’å¿˜ã‚Œãšã«</p>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 pb-safe pt-2 px-6 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-50 flex justify-between max-w-md mx-auto">
        <button onclick="switchView('home')" class="nav-item active flex flex-col items-center w-16 p-1 rounded-xl transition-all" id="nav-home">
            <div class="icon-box w-10 h-10 rounded-full flex items-center justify-center text-gray-400 mb-1 transition-colors">
                <i class="fa-solid fa-house"></i>
            </div>
            <span class="text-[10px] font-bold text-gray-500">ãƒ›ãƒ¼ãƒ </span>
        </button>
        <button onclick="switchView('schedule')" class="nav-item flex flex-col items-center w-16 p-1 rounded-xl transition-all" id="nav-schedule">
            <div class="icon-box w-10 h-10 rounded-full flex items-center justify-center text-gray-400 mb-1 transition-colors">
                <i class="fa-regular fa-calendar-check"></i>
            </div>
            <span class="text-[10px] font-bold text-gray-500">æ—¥ç¨‹è¡¨</span>
        </button>
        <button onclick="switchView('info')" class="nav-item flex flex-col items-center w-16 p-1 rounded-xl transition-all" id="nav-info">
            <div class="icon-box w-10 h-10 rounded-full flex items-center justify-center text-gray-400 mb-1 transition-colors">
                <i class="fa-solid fa-suitcase"></i>
            </div>
            <span class="text-[10px] font-bold text-gray-500">å®¿ãƒ»æº–å‚™</span>
        </button>
    </nav>

    <script>
        // --- ãƒ‡ãƒ¼ã‚¿å®šç¾© ---
        // isoDate, lat, lon ã‚’è¿½åŠ 
        const scheduleData = [
            {
                date: "3/26 (æœ¨)", title: "å¤§é˜ªåŸãƒ»å¤å¢³ãƒ»æµ·éŠé¤¨",
                isoDate: "2026-03-26", lat: 34.6937, lon: 135.5023,
                image: "./day1_2.png",
                events: [
                    { t: "09:00", i: "ğŸš„", title: "å¤§é˜ªç€ & è·ç‰©é…é€", desc: "æ–°å¤§é˜ªé§…ã€ŒCrostaã€ã§ãƒ›ãƒ†ãƒ«ã¸è·ç‰©é€ä»˜ã€‚æ‰‹ã¶ã‚‰ã§é–‹å§‹ï¼", map: "æ–°å¤§é˜ªé§… ã‚­ãƒ£ãƒªãƒ¼ã‚µãƒ¼ãƒ“ã‚¹", move: "ğŸšƒ JRå¤§é˜ªç’°çŠ¶ç·š ç´„20åˆ†" },
                    { t: "10:00", i: "ğŸ¯", title: "å¤§é˜ªåŸ", desc: "å…¬åœ’æ•£ç­–ã¨å¤©å®ˆé–£è¦‹å­¦ã€‚æ˜¥ã®é¢¨ã‚’æ„Ÿã˜ã¦ã€‚", map: "å¤§é˜ªåŸå¤©å®ˆé–£", crowd: "high", move: "ğŸš¶ å¾’æ­©ã™ã (å…¬åœ’å†…)" },
                    { t: "11:00", i: "ğŸ½ï¸", title: "æ—©ã‚ã®ãƒ©ãƒ³ãƒ", desc: "JO-TERRACE OSAKAã«ã¦ã€‚æ··é›‘å›é¿ã€‚", map: "JO-TERRACE OSAKA", crowd: "medium", move: "ğŸšƒ JRé˜ªå’Œç·š ç´„40åˆ†" },
                    { t: "13:00", i: "ğŸ”‘", title: "å¤§ä»™å¤å¢³ (ä»å¾³å¤©çš‡é™µ)", desc: "ä¸–ç•Œæœ€å¤§ç´šã®å¤å¢³ã€‚ç™¾èˆŒé³¥é§…ã™ãã€‚", map: "ä»å¾³å¤©çš‡é™µ æ‹æ‰€", crowd: "low", move: "ğŸšƒ JR+åœ°ä¸‹é‰„ ç´„50åˆ†" },
                    { t: "15:30", i: "ğŸ ", title: "æµ·éŠé¤¨", desc: "å¤•æ–¹ã€œå¤œã®æµ·éŠé¤¨ã€‚ã‚¸ãƒ³ãƒ™ã‚¨ã‚¶ãƒ¡é‘‘è³ã€‚", map: "æµ·éŠé¤¨", crowd: "medium", move: "ğŸš¢ ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ãƒ©ã‚¤ãƒ³ ç´„10åˆ†" },
                    { t: "18:00", i: "ğŸš¢", title: "ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ãƒ©ã‚¤ãƒ³", desc: "æµ·éŠé¤¨è£ã‹ã‚‰ã‚·ãƒ£ãƒˆãƒ«èˆ¹ã§USJã‚¨ãƒªã‚¢ã¸ç›´è¡Œã€‚", map: "ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ãƒ©ã‚¤ãƒ³ æµ·éŠé¤¨è¥¿ã¯ã¨ã°", crowd: "low", move: "ğŸš¶ å¾’æ­© ç´„5åˆ†" },
                    { t: "18:30", i: "ğŸ¨", title: "ãƒ›ãƒ†ãƒ« ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³", desc: "ãƒ›ãƒ†ãƒ«äº¬é˜ªã§è·ç‰©å—å–ã€‚å¤•é£Ÿã¯ã‚·ãƒ†ã‚£ã‚¦ã‚©ãƒ¼ã‚¯ã§ã€‚", map: "ãƒ›ãƒ†ãƒ«äº¬é˜ªãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒ»ã‚¿ãƒ¯ãƒ¼" }
                ]
            },
            {
                date: "3/27 (é‡‘)", title: "USJ å…¨åŠ›æŠ•çƒï¼",
                isoDate: "2026-03-27", lat: 34.6654, lon: 135.4323,
                image: "./day1_2.png",
                events: [
                    { t: "06:30", i: "ğŸƒ", title: "ãƒ›ãƒ†ãƒ«å‡ºç™º", desc: "ã‚²ãƒ¼ãƒˆå‰å¾…æ©Ÿã€‚é–‹åœ’ãƒ€ãƒƒã‚·ãƒ¥ï¼", map: "ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒ»ã‚¹ã‚¿ã‚¸ã‚ªãƒ»ã‚¸ãƒ£ãƒ‘ãƒ³", move: "ğŸš¶ å¾’æ­© ç´„5åˆ†" },
                    { t: "åˆå‰", i: "ğŸ„", title: "ãƒãƒªã‚ªã‚¨ãƒªã‚¢", desc: "æ•´ç†åˆ¸/ç¢ºç´„åˆ¸ã§å…¥å ´ã€‚å…¨åŠ›ã§éŠã¶", map: "", crowd: "high" },
                    { t: "19:00", i: "ğŸ–", title: "å¤•é£Ÿ", desc: "ãƒ‘ãƒ¼ã‚¯å†… ä¸‰æœ¬ã®ç®’ãªã©", map: "", crowd: "high", move: "ğŸš¶ ãƒ‘ãƒ¼ã‚¯å†…ç§»å‹•" },
                    { t: "21:00", i: "â™¨ï¸", title: "å±•æœ›æ¸©æ³‰", desc: "ãƒ›ãƒ†ãƒ«31éšã§ç–²ã‚Œã‚’ç™’ã‚„ã™", map: "", crowd: "low" }
                ]
            },
            {
                date: "3/28 (åœŸ)", title: "å®‡æ²»ãƒ»ä¼è¦‹ãƒ»æ¸…æ°´",
                isoDate: "2026-03-28", lat: 35.0116, lon: 135.7681,
                image: "./day3_4.png",
                events: [
                    { t: "10:00", i: "ğŸ‘œ", title: "è·ç‰©é ã‘", desc: "äº¬éƒ½é§… ã‚¢ãƒ‘ãƒ›ãƒ†ãƒ«ã¸", map: "ã‚¢ãƒ‘ãƒ›ãƒ†ãƒ« äº¬éƒ½é§…åŒ—", move: "ğŸšƒ JRå¥ˆè‰¯ç·š ç´„20åˆ†" },
                    { t: "11:30", i: "ğŸµ", title: "å®‡æ²» å¹³ç­‰é™¢", desc: "ä¸­æ‘è—¤å‰ã¯æ•´ç†åˆ¸å¿…é ˆï¼", map: "å¹³ç­‰é™¢", crowd: "high", move: "ğŸšƒ JRå¥ˆè‰¯ç·š+äº¬é˜ª ç´„40åˆ†" },
                    { t: "14:00", i: "â›©ï¸", title: "ä¼è¦‹ç¨²è·", desc: "åƒæœ¬é³¥å±…ã€‚ã‚¹ãƒ‹ãƒ¼ã‚«ãƒ¼æ¨å¥¨ã€‚", map: "ä¼è¦‹ç¨²è·å¤§ç¤¾", crowd: "high", move: "ğŸšƒ JRå¥ˆè‰¯ç·š ç´„10åˆ† â†’ äº¬éƒ½é§…" },
                    {
                        t: "17:00",
                        i: "ğŸ¥¢",
                        title: "å¤•é£Ÿï¼šäº¬é‡èœæ–™ç† æ¥æ–¹æ¥",
                        desc: "äºˆç´„æ¸ˆï¼š17:00ã€œ19:00 (6å)<br>å ´æ‰€ï¼šäº¬éƒ½é§…ãƒ“ãƒ«åº—",
                        map: "æ¥æ–¹æ¥ äº¬éƒ½é§…ãƒ“ãƒ«åº—",
                        crowd: "low",
                        move: "ğŸš• ã‚¿ã‚¯ã‚·ãƒ¼ ç´„15åˆ†"
                    },
                    { t: "19:00", i: "âœ¨", title: "æ¸…æ°´å¯º å¤œé–“æ‹è¦³", desc: "ã‚¿ã‚¯ã‚·ãƒ¼ç§»å‹•æ¨å¥¨ã€‚å¹»æƒ³çš„ãªå¤œæ¡œã€‚", map: "æ¸…æ°´å¯º", crowd: "high" }
                ]
            },
            {
                date: "3/29 (æ—¥)", title: "å¾¡æ‰€ãƒ»æ˜ ç”»æ‘ãƒ»ã”é¦³èµ°",
                isoDate: "2026-03-29", lat: 35.0116, lon: 135.7681,
                image: "./day3_4.png",
                events: [
                    { t: "10:00", i: "âš½", title: "äº¬éƒ½å¾¡æ‰€ è¹´é ", desc: "å®Ÿæ¼”æ—¥ï¼å¹³å®‰ã®æ–‡åŒ–ã«è§¦ã‚Œã‚‹", map: "äº¬éƒ½å¾¡æ‰€", crowd: "medium", move: "ğŸšƒ åœ°ä¸‹é‰„+åµé›» ç´„40åˆ†" },
                    { t: "13:30", i: "ğŸ¥·", title: "å¤ªç§¦æ˜ ç”»æ‘", desc: "å¿è€…ãƒ»ã¡ã‚ƒã‚“ã°ã‚‰ãƒ»ç«‹ä½“è¿·è·¯", map: "æ±æ˜ å¤ªç§¦æ˜ ç”»æ‘", crowd: "medium", move: "ğŸšƒ åµé›»+JR ç´„40åˆ† â†’ äº¬éƒ½é§…" },
                    {
                        t: "18:30",
                        i: "ğŸ¢",
                        title: "å¤•é£Ÿï¼šç‚­ç«ä¸²ç„¼ ã“ã‘ã“ã£ã“",
                        desc: "äºˆç´„æ¸ˆï¼š18:30ã€œ20:30<br>å ´æ‰€ï¼šJRäº¬éƒ½ä¼Šå‹¢ä¸¹ 10F<br>äºˆç´„ç•ªå·ï¼šSDA534993",
                        map: "ç‚­ç«ä¸²ç„¼ ã“ã‘ã“ã£ã“ äº¬éƒ½",
                        crowd: "low"
                    }
                ]
            },
            {
                date: "3/30 (æœˆ)", title: "é‡‘é–£ãƒ»åµå±±ãƒ»å¸°è·¯",
                isoDate: "2026-03-30", lat: 35.0133, lon: 135.6778, // åµå±±å‘¨è¾ºã®åº§æ¨™
                image: "./day5_hotel.png",
                events: [
                    { t: "08:30", i: "ğŸš•", title: "é¾å®‰å¯º", desc: "æœã‚¤ãƒã®çŸ³åº­ã¯é™ã‹ã§ãŠã™ã™ã‚", map: "é¾å®‰å¯º", crowd: "low", move: "ğŸšŒ å¸‚ãƒã‚¹ ç´„15åˆ†" },
                    { t: "10:00", i: "âœ¨", title: "é‡‘é–£å¯º", desc: "è¼ãèˆåˆ©æ®¿ã§å®¶æ—å†™çœŸ", map: "é‡‘é–£å¯º", crowd: "high", move: "ğŸš• ã‚¿ã‚¯ã‚·ãƒ¼ ç´„20åˆ†" },
                    {
                        t: "11:30",
                        i: "ğŸ±",
                        title: "æ˜¼é£Ÿ & æ¸©æ³‰ï¼šèŠ±ã®ã„ãˆ",
                        desc: "äºˆç´„æ¸ˆï¼š11:30ã€œ (6å/Pã‚ã‚Š)<br>å€‹å®¤ä¼šå¸­ã€Œåµ¯å³¨é‡ã€ï¼†å­ä¾›æ‡çŸ³<br>15æ™‚ã¾ã§æ»åœ¨å¯ãƒ»æ¸©æ³‰å…¥æµ´OKâ™¨ï¸",
                        map: "èŠ±ã®ã„ãˆ",
                        crowd: "low",
                        move: "ğŸš¶ å¾’æ­© ç´„15åˆ†"
                    },
                    { t: "15:00", i: "ğŸ‹", title: "åµå±±æ•£ç­–", desc: "æ¸¡æœˆæ©‹ãƒ»ç«¹æ—ã®å°å¾„ãªã©ã€‚<br>ãŠåœŸç”£è³¼å…¥ã‚¿ã‚¤ãƒ ã€‚", map: "åµå±± æ¸¡æœˆæ©‹", crowd: "medium", move: "ğŸšƒ JRåµ¯å³¨é‡ç·š ç´„15åˆ† â†’ äº¬éƒ½é§…" },
                    { t: "18:30", i: "ğŸš…", title: "æ–°å¹¹ç·š", desc: "äº¬éƒ½é§…ç™ºã€‚ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼", map: "äº¬éƒ½é§…" }
                ]
            }
        ];

        // --- ãƒ­ã‚¸ãƒƒã‚¯ ---

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchView(viewName) {
            // å…¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³éè¡¨ç¤º
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.getElementById('view-' + viewName).classList.remove('hidden');

            // ãƒŠãƒ“ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById('nav-' + viewName).classList.add('active');

            // æ—¥ç¨‹ã‚¿ãƒ–ã‚’é–‹ã„ãŸæ™‚ã®åˆæœŸå‹•ä½œ
            if(viewName === 'schedule') {
                autoSelectDay();
            }
            window.scrollTo(0,0);
        }

        // æ—¥ç¨‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderDay(index) {
            const data = scheduleData[index];
            const container = document.getElementById('day-content');
            
            // ã‚¿ãƒ–ã®ã‚¹ã‚¿ã‚¤ãƒ«æ›´æ–°
            document.querySelectorAll('.day-tab').forEach((el, i) => {
                if (i === index) {
                    el.classList.add('bg-pink-500', 'text-white', 'border-pink-600', 'shadow-md');
                    el.classList.remove('bg-white', 'text-gray-500');
                } else {
                    el.classList.remove('bg-pink-500', 'text-white', 'border-pink-600', 'shadow-md');
                    el.classList.add('bg-white', 'text-gray-500');
                }
            });

            // HTMLç”Ÿæˆ: ã‚¿ã‚¤ãƒˆãƒ«ã¨å¤©æ°—ã‚’æ¨ªä¸¦ã³(Flex)ã«
            let html = `
                <div class="mt-4 mb-6 text-center fade-enter">
                    <div class="flex flex-wrap justify-center items-center gap-x-2 gap-y-1 mb-1">
                        <h2 class="text-xl font-bold text-gray-800">${data.title}</h2>
                        <div id="weather-display" class="empty:hidden"></div>
                    </div>
                    <p class="text-xs text-pink-500 font-bold tracking-widest uppercase">${data.date}</p>
                    <p class="text-[10px] text-gray-400 mt-1">ğŸŸ¢ğŸŸ¡ğŸ”´ æ··é›‘ã‚¢ã‚¤ã‚³ãƒ³ã¯éå»å‚¾å‘ã®ç›®å®‰ã§ã™</p>
                </div>

                <div class="bg-white p-2 rounded-xl border border-gray-100 shadow-sm mb-6 fade-enter">
                    <img src="${data.image}" class="w-full rounded-lg" onerror="this.style.display='none'">
                </div>

                <div class="relative pl-4 space-y-8 fade-enter">
                    <div class="absolute left-[27px] top-2 bottom-2 w-0.5 bg-pink-100"></div>
            `;

            data.events.forEach((e, idx) => {
                const mapBtn = e.map ? `<a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.map)}" target="_blank" class="ml-auto bg-gray-100 text-[10px] text-gray-500 px-3 py-1.5 rounded-full font-bold hover:bg-pink-100 hover:text-pink-600 transition"><i class="fa-solid fa-map-location-dot mr-1"></i>ãƒãƒƒãƒ—</a>` : '';
                const crowdBadge = getCrowdBadge(e.crowd);

                html += `
                    <div class="event-card relative flex gap-4 items-start">
                        <div class="z-10 w-6 h-6 rounded-full bg-white border-2 border-pink-400 flex items-center justify-center text-[10px] shrink-0 mt-1 shadow-sm">
                            ${e.i}
                        </div>
                        <div class="flex-grow bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                            <div class="flex justify-between items-start mb-1">
                                <div class="flex items-center gap-2 flex-wrap">
                                    <span class="text-pink-400 text-xs font-bold">${e.t}</span>
                                    ${crowdBadge}
                                </div>
                                ${mapBtn}
                            </div>
                            <h3 class="font-bold text-gray-800">${e.title}</h3>
                            <p class="text-xs text-gray-500 mt-1 leading-relaxed">${e.desc}</p>
                        </div>
                    </div>
                `;

                // ç§»å‹•æ‰‹æ®µã®è¡¨ç¤ºï¼ˆæ¬¡ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚‹å ´åˆã®ã¿ï¼‰
                if (e.move && idx < data.events.length - 1) {
                    html += `
                        <div class="relative flex gap-4 items-center ml-[11px] -my-3">
                            <div class="z-10 w-auto pl-6 flex items-center">
                                <span class="text-[10px] text-gray-400 bg-gray-50 px-2 py-0.5 rounded-full border border-gray-100 whitespace-nowrap"><i class="fa-solid fa-route mr-1 text-pink-300"></i>${e.move}</span>
                            </div>
                        </div>
                    `;
                }
            });

            html += `</div>`; // end timeline
            
            // ãƒ•ãƒƒã‚¿ãƒ¼ä½™ç™½ï¼ˆæœ€çµ‚æ—¥ã®ã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
            if(index === 4) {
                html += `<div class="mt-10 text-center text-xs text-gray-300 font-bold">HAVE A NICE TRIP! ğŸŒ¸</div>`;
            }

            container.innerHTML = html;
            
            // å¤©æ°—å–å¾—å‘¼ã³å‡ºã—
            if(data.isoDate && data.lat) {
                fetchWeather(data.lat, data.lon, data.isoDate);
            }
        }

        // å¤©æ°—å–å¾— (Open-Meteo API)
        async function fetchWeather(lat, lon, date) {
            const display = document.getElementById('weather-display');
            if (!lat || !date || !display) return;

            // ã‚¹ãƒƒã‚­ãƒªã•ã›ã‚‹ãŸã‚ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã¯ä½•ã‚‚å‡ºã•ãªã„(ã¾ãŸã¯æœ€å°é™)
            // display.innerHTML = `<i class="fa-solid fa-spinner fa-spin text-gray-300 text-xs"></i>`;

            try {
                // API URL (éå»ãƒ‡ãƒ¼ã‚¿ã§ã¯ãªãäºˆå ±ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—)
                // daily=weathercode,temperature_2m_max,temperature_2m_min
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=Asia%2FTokyo&start_date=${date}&end_date=${date}`;
                
                const response = await fetch(url);
                const data = await response.json();

                if (data.daily && data.daily.weathercode && data.daily.weathercode.length > 0) {
                    const code = data.daily.weathercode[0];
                    const max = Math.round(data.daily.temperature_2m_max[0]);
                    const min = Math.round(data.daily.temperature_2m_min[0]);
                    const weatherIcon = getWeatherIcon(code);
                    
                    // ã‚¹ãƒƒã‚­ãƒªã—ãŸPillãƒ‡ã‚¶ã‚¤ãƒ³
                    display.innerHTML = `
                        <div class="weather-badge inline-flex items-center gap-1.5 bg-blue-50 px-2.5 py-1 rounded-full text-blue-600 border border-blue-100 shadow-sm animate-[fadeEnter_0.5s]">
                            <span class="text-sm">${weatherIcon}</span> 
                            <span class="text-xs font-bold tracking-tight">${max}<span class="text-[9px] opacity-70">â„ƒ</span> / ${min}<span class="text-[9px] opacity-70">â„ƒ</span></span>
                        </div>
                    `;
                } else {
                    // ãƒ‡ãƒ¼ã‚¿ãŒã¾ã ãªã„å ´åˆ (16æ—¥ä»¥ä¸Šå…ˆ) -> ä½•ã‚‚è¡¨ç¤ºã—ãªã„ (ã‚¹ãƒƒã‚­ãƒªç¶­æŒ)
                    display.innerHTML = "";
                }
            } catch (e) {
                console.error("Weather fetch failed", e);
                display.innerHTML = ""; // ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚éè¡¨ç¤ºã§è¦‹ãŸç›®ã‚’å®ˆã‚‹
            }
        }

        // æ··é›‘ãƒãƒƒã‚¸ç”Ÿæˆ
        function getCrowdBadge(level) {
            if (!level) return '';
            const map = {
                high:   { dot: 'ğŸ”´', label: 'æ··é›‘',     cls: 'crowd-high' },
                medium: { dot: 'ğŸŸ¡', label: 'ã‚„ã‚„æ··é›‘', cls: 'crowd-medium' },
                low:    { dot: 'ğŸŸ¢', label: 'ç©ºã„ã¦ã‚‹', cls: 'crowd-low' }
            };
            const m = map[level];
            if (!m) return '';
            return `<span class="crowd-badge ${m.cls}">${m.dot} ${m.label}</span>`;
        }

        // å¤©æ°—ã‚³ãƒ¼ãƒ‰å¤‰æ›
        function getWeatherIcon(code) {
            // WMO Weather interpretation codes (WW)
            if (code === 0) return "â˜€ï¸"; // å¿«æ™´
            if (code === 1 || code === 2 || code === 3) return "â›…"; // æ™´ã‚Œãƒ»è–„æ›‡ã‚Š
            if (code >= 45 && code <= 48) return "ğŸŒ«ï¸"; // éœ§
            if (code >= 51 && code <= 67) return "â˜‚ï¸"; // é›¨
            if (code >= 71 && code <= 77) return "â˜ƒï¸"; // é›ª
            if (code >= 80 && code <= 82) return "â˜”"; // ã«ã‚ã‹é›¨
            if (code >= 95) return "âš¡"; // é›·é›¨
            return "â˜ï¸";
        }

        // æ—¥ä»˜è‡ªå‹•åˆ¤å®š
        function autoSelectDay() {
            const today = new Date();
            const month = today.getMonth() + 1;
            const date = today.getDate();
            
            // æ—…è¡ŒæœŸé–“åˆ¤å®š (2026å¹´æƒ³å®šã ãŒã€æ—¥ä»˜ã ã‘ã§ç°¡æ˜“åˆ¤å®š)
            if (month === 3) {
                if (date === 26) renderDay(0);
                else if (date === 27) renderDay(1);
                else if (date === 28) renderDay(2);
                else if (date === 29) renderDay(3);
                else if (date === 30) renderDay(4);
                else renderDay(0); // æœŸé–“å¤–ã¯åˆæ—¥
            } else {
                renderDay(0);
            }
            
            // ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§è©²å½“ã‚¿ãƒ–ã‚’è¡¨ç¤º
            const activeTab = document.querySelector('.bg-pink-500');
            if(activeTab) {
                activeTab.scrollIntoView({behavior: "smooth", inline: "center"});
            }
        }

        // --- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ ---
        function updateCountdown() {
            const display = document.getElementById('countdown-display');
            if (!display) return;
            const now = new Date();
            const tripStart = new Date('2026-03-26T00:00:00+09:00');
            const tripEnd   = new Date('2026-03-30T23:59:59+09:00');

            if (now < tripStart) {
                const diff = Math.ceil((tripStart - now) / (1000 * 60 * 60 * 24));
                display.innerHTML = `<div class="bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 inline-block"><span class="text-2xl font-bold">${diff}</span><span class="text-xs font-bold ml-1">æ—¥å¾Œã«å‡ºç™º!</span></div>`;
            } else if (now <= tripEnd) {
                const dayNum = Math.floor((now - tripStart) / (1000 * 60 * 60 * 24)) + 1;
                display.innerHTML = `<div class="bg-white/30 backdrop-blur-sm rounded-xl px-4 py-2 inline-block animate-pulse"><span class="text-xs font-bold">æ—…è¡Œ</span><span class="text-2xl font-bold mx-1">${dayNum}</span><span class="text-xs font-bold">æ—¥ç›®ï¼æ¥½ã—ã‚“ã§!</span></div>`;
            } else {
                display.innerHTML = `<div class="bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 inline-block"><span class="text-xs font-bold">ãŠç–²ã‚Œæ§˜ã§ã—ãŸ! ç´ æ•µãªæ€ã„å‡ºã«</span></div>`;
            }
        }

        // --- ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ localStorage æ°¸ç¶šåŒ– ---
        function initChecklist() {
            const checkboxes = document.querySelectorAll('#view-info input[type="checkbox"]');
            const saved = JSON.parse(localStorage.getItem('tripChecklist') || '[]');
            checkboxes.forEach((cb, i) => {
                if (saved[i]) cb.checked = true;
                cb.addEventListener('change', () => {
                    const states = [];
                    checkboxes.forEach(c => states.push(c.checked));
                    localStorage.setItem('tripChecklist', JSON.stringify(states));
                });
            });
        }

        // --- ç¾åœ¨ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£åˆ¤å®š ---
        function getCurrentEventIndex(events, isoDate) {
            const now = new Date();
            const eventDate = new Date(isoDate + 'T00:00:00+09:00');
            // æ—…è¡Œæ—¥ã§ãªã‘ã‚Œã°ãƒã‚¤ãƒ©ã‚¤ãƒˆãªã—
            if (now.toDateString() !== eventDate.toDateString()) return { current: -1, next: -1 };

            const currentHour = now.getHours();
            const currentMin = now.getMinutes();
            const nowMinutes = currentHour * 60 + currentMin;

            let current = -1;
            let next = -1;

            for (let i = 0; i < events.length; i++) {
                const t = events[i].t;
                const match = t.match(/(\d{1,2}):(\d{2})/);
                if (!match) continue;
                const evtMinutes = parseInt(match[1]) * 60 + parseInt(match[2]);
                if (nowMinutes >= evtMinutes) {
                    current = i;
                    next = i + 1 < events.length ? i + 1 : -1;
                }
            }
            return { current, next };
        }

        // --- ã‚¹ãƒ¯ã‚¤ãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ ---
        let touchStartX = 0;
        let touchEndX = 0;
        let currentDayIndex = 0;

        function initSwipe() {
            const container = document.getElementById('day-content');
            container.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true });
            container.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, { passive: true });
        }

        function handleSwipe() {
            const diff = touchStartX - touchEndX;
            if (Math.abs(diff) < 60) return; // é–¾å€¤æœªæº€ã¯ç„¡è¦–
            if (diff > 0 && currentDayIndex < 4) {
                renderDay(currentDayIndex + 1);
            } else if (diff < 0 && currentDayIndex > 0) {
                renderDay(currentDayIndex - 1);
            }
        }

        // renderDay ã‚’æ‹¡å¼µ: currentDayIndex ã‚’è¨˜éŒ² & ç¾åœ¨åœ°ãƒã‚¤ãƒ©ã‚¤ãƒˆå¯¾å¿œ
        const _origRenderDay = renderDay;
        renderDay = function(index) {
            currentDayIndex = index;
            _origRenderDay(index);

            // ç¾åœ¨ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            const data = scheduleData[index];
            const { current, next } = getCurrentEventIndex(data.events, data.isoDate);
            const cards = document.querySelectorAll('#day-content .event-card');
            cards.forEach((card, i) => {
                const inner = card.querySelector('.bg-white.p-4');
                if (!inner) return;
                if (i === current) {
                    inner.classList.remove('bg-white', 'border-gray-100');
                    inner.classList.add('bg-pink-50', 'border-pink-300', 'ring-2', 'ring-pink-200');
                    // ã€Œã„ã¾ã‚³ã‚³ã€ãƒãƒƒã‚¸
                    const badge = document.createElement('span');
                    badge.className = 'absolute -top-2 -left-1 bg-pink-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-full shadow z-20';
                    badge.textContent = 'ã„ã¾ã‚³ã‚³';
                    card.style.position = 'relative';
                    card.appendChild(badge);
                } else if (i === next) {
                    inner.classList.remove('border-gray-100');
                    inner.classList.add('border-blue-200');
                    const badge = document.createElement('span');
                    badge.className = 'absolute -top-2 -left-1 bg-blue-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-full shadow z-20';
                    badge.textContent = 'ã¤ã';
                    card.style.position = 'relative';
                    card.appendChild(badge);
                }
            });

            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            const activeTab = document.getElementById('tab-' + index);
            if (activeTab) {
                activeTab.scrollIntoView({ behavior: 'smooth', inline: 'center' });
            }
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            updateCountdown();
            initChecklist();
            initSwipe();
            switchView('home');
        });

    </script>
</body>
</html>
